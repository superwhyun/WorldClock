이름: 세계시계 웹 애플리케이션
설명: 다양한 국가의 정확한 실시간 시계를 표시하며 사용자 맞춤 설정과 서머타임 인식 기능을 제공하는 웹 애플리케이션
버전: 1.0.0

요구사항:
  - 여러 주요 도시의 현재 시간 표시
  - 주요 도시 목록에서 사용자가 선택 가능
  - 단일 화면에 최대 8개의 시계 표시
  - 각 국가별 시간에 따른 자동 다크모드 구현 (밤시간: 오후 9시 ~ 오전 7시)
  - 서머타임(DST) 적용 국가 표시
  - 부드러운 초침 표시로 실시간 시간 업데이트
  - 다양한 화면 크기에 대응하는 반응형 디자인
  - 시간 표시와 함께 국가 국기 표시
  - 디지털 및 아날로그 시계 옵션 제공
  - 시간과 함께 날짜 정보 표시
  - 시계 사용자 정의 이름/라벨링 허용
  - 사용자 선택 항목 지속성 (localStorage 사용)
  - 드래그 앤 드롭으로 시계 위치 조정 기능
  - URL 파라미터를 통한 시계 구성 공유 기능
  - 각 도시별 실시간 날씨 정보 표시 (선택적 기능)

구성요소:
  인터페이스:
    - 검색 기능이 있는 주요 도시 선택 드롭다운/패널
    - 아날로그 및 디지털 옵션을 가진 시계 표시 구성요소 (최대 8개)
    - 시계 추가/제거 버튼
    - 도시별 시간 기반 자동 다크/라이트 모드 토글 (자동 및 수동 옵션)
    - 관련 지역의 서머타임 표시기
    - 도시별 국가 국기 표시
    - 사용자 맞춤 설정 패널
    - 시간 형식 선택기 (12/24시간)
    - 형식 옵션이 있는 날짜 표시
    - 현지 시간 참조 표시기
    - 드래그 앤 드롭 인터페이스
    - URL 공유 기능
    - 도시별 날씨 정보 위젯 (온도, 날씨 아이콘)

기술스택:
  프론트엔드:
    - HTML5
    - CSS3
    - JavaScript (ES6+)
    - Luxon.js (타임존 처리)
    - 국기 아이콘 라이브러리
    - LocalStorage API (지속성)
    - 반응형 CSS 프레임워크 (선택사항)
    - 아날로그 시계 구현을 위한 Canvas/SVG
    - React DnD 또는 유사한 드래그 앤 드롭 라이브러리
    - WeatherAPI (실시간 날씨 정보)

아키텍처:
  - 단일 페이지 애플리케이션
  - 모듈러 컴포넌트 설계를 통한 클라이언트 사이드 렌더링
  - 코드 구성을 위한 MVC 또는 유사한 패턴
  - 백엔드 요구사항 없음 (모든 처리는 브라우저에서 수행)
  - 모바일 우선 접근법을 통한 반응형 레이아웃
  - 실시간 업데이트를 위한 이벤트 기반 설계
  - URL 라우팅을 통한 상태 공유

사용자경험:
  - 최소한의 학습 곡선을 가진 직관적인 UI
  - 빠른 로딩 시간과 성능
  - 서머타임, 시간대 차이에 대한 명확한 시각적 표시
  - 모바일, 태블릿, 데스크톱에서 잘 작동하는 반응형 디자인
  - WCAG 가이드라인을 따르는 접근성 디자인
  - 우아한 전환 효과와 애니메이션
  - 잘못된 선택이나 사용 불가능한 타임존에 대한 오류 처리
  - 직관적인 드래그 앤 드롭 인터페이스
  - URL 공유를 통한 간편한 시계 구성 공유

성능:
  - 과도한 DOM 업데이트 없는 효율적인 시간 업데이트 메커니즘
  - 여러 시계 면의 최적화된 렌더링
  - 로딩 시간 단축을 위한 최소 종속성
  - 타임존 계산의 효율적인 처리
  - 드래그 앤 드롭 중 성능 최적화

데이터:
  - 신뢰할 수 있는 소스의 타임존 데이터베이스 (IANA 타임존 데이터베이스)
  - 주요 도시 정보 (도시명, 국가명, 국기, 타임존, UTC 오프셋)
  - 다양한 지역의 서머타임 규칙 및 현재 상태
  - 국가 국기 이미지/아이콘
  - 사용자 기본 설정 (localStorage에 저장)
  - 일반적인 타임존 조합을 위한 기본 프리셋
  - URL 파라미터를 통한 시계 구성 데이터

기능:
  핵심기능:
    - 부드러운 초침 애니메이션이 있는 실시간 시계 표시
    - 검색 기능이 있는 주요 도시 선택 기능
    - 직관적인 UI로 시계 추가/제거
    - 도시별 시간 기반 자동 다크모드 (오후 9시 ~ 오전 7시)
    - 시간과 함께 날짜 표시
    - 각 도시의 국가 국기 표시
    - 사용자 선택 항목의 지속성
    - 디지털 및 아날로그 시계 보기
    - 드래그 앤 드롭으로 시계 순서 변경
    - URL 파라미터를 통한 시계 구성 공유
  고급기능:
    - 명확한 시각적 마커를 통한 서머타임 표시
    - 12/24시간 형식 토글
    - 사용자 정의 시계 라벨/이름
    - 세계 지도 시각화 (선택사항)
    - 선택된 타임존 간 시간 차이 계산
    - 현지 시간 강조/참조점
    - 빠른 선택을 위한 즐겨찾기 도시 목록
    - 위치별 일출/일몰 시간 (선택사항)
    - 공유 가능한 시계 구성 (URL 파라미터)
    - WeatherAPI 키 설정 및 관리 기능
    - 날씨 상세정보 팝업 (3일 예보 및 시간별 예보)

개발상태:
  - 프로젝트 초기화 완료
  - 사양 정의 완료
  - 기본 구조 구현 완료
  - 도시 기반 시계 선택 기능 구현 완료
  - Footer와 브랜딩 요소 추가 완료
  - 프로젝트 문서화 완료
  - MIT 라이선스 적용 완료
  - GitHub 저장소 퍼블리싱 완료
  - 실시간 날씨 정보 기능 구현 완료
  - 날씨 API 오류 처리 및 데이터 마이그레이션 완료

최근업데이트:
  시간별_예보_그래프_개선:
    - 온도와 강수확률을 동일한 그래프에 표시 (이중 Y축)
    - 강수확률 (파란색 선, 왼쪽 Y축)과 온도 (빨간색 선, 오른쪽 Y축)
    - 날씨 아이콘을 그래프 상단에 깔끔하게 배치
    - 하단에 범례 추가하여 선별 구분 명시
    - 시간대 계산 로직 개선 - WeatherAPI의 로컬 시간 활용
    - 해당 도시의 현재 시간부터 당일 자정까지 정확한 표시
    - Intl.DateTimeFormat을 사용한 정확한 시간대 변환
  시간별_예보_그래프_구현:
    - Recharts를 사용한 시간별 강수확률 그래프 추가
    - 강수확률을 세로축, 시간을 가로축으로 한 선형 차트
    - 현지 현재 시간부터 자정까지의 모든 시간 표시
    - 각 시간별 날씨 아이콘을 차트 하단에 배치
    - 온도 정보도 함께 표시하여 종합적인 날씨 정보 제공
    - 반응형 차트 디자인으로 다양한 화면 크기 지원
  도시_추가:
    - 한국 도시로 대전과 세종 추가
    - Asia/Seoul 시간대 적용
    - 국가 코드 KR로 한국 국기 표시
    - 영문명: Daejeon, Sejong으로 WeatherAPI 호환
  날씨_시간대_정확성_수정:
    - 시간별 예보가 해당 도시의 시간대에 맞게 표시되도록 수정
    - WeatherDetailDialog에 timezone prop 추가
    - formatHour 함수에서 해당 도시의 시간대로 시간 포맷팅
    - getCityCurrentTime 함수로 도시별 현재 시간 계산
    - 시간별 예보 필터링 시 도시의 현지 시간 기준으로 비교
    - clock-display.tsx에서 timezone 정보를 날씨 다이얼로그에 전달
  날씨_상세정보_팝업_개선:
    - 다이얼로그 크기를 max-w-2xl로 확대하여 가로 스크롤 방지
    - 시간별 예보를 1시간 간격으로 개선 (3시간 → 1시간)
    - 현재 시간 이후의 시간만 표시하도록 필터링 추가
    - 3일 예보를 가로 3열 그리드 레이아웃으로 최적화
    - 시간별 예보를 6열 그리드로 컴팩트하게 배치
    - 세로 스크롤 최소화를 위한 compact 디자인 적용
    - 최대 12시간까지의 시간별 예보 표시
    - 아이콘 및 텍스트 크기 최적화로 공간 효율성 향상
  날씨_API_오류수정:
    - 기존 localStorage 데이터의 cityNameEn 필드 누락 문제 해결
    - 도시명 유효성 검사 강화 (undefined, 빈 문자열 방지)
    - Weather 컴포넌트에서 방어적 처리 추가
    - 기존 시계 데이터 자동 마이그레이션 로직 구현
    - 영문 도시명 검증 및 fallback 처리 추가
  WeatherAPI_키_설정:
    - 설정 패널에 WeatherAPI 키 입력 화면 추가
    - 클라이언트 브라우저 localStorage에 API 키 저장
    - weather-utils.ts에서 localStorage API 키 읽기 기능 구현
    - 패스워드 형태 API 키 입력 (숨김/표시 토글)
    - WeatherAPI.com 가입 링크 및 사용 안내 제공
    - API 키 저장 확인 메시지 및 Clear 기능 추가
    - localStorage 우선순위로 환경변수 무시 기능 구현
  다국어_지원_및_UI개선:
    - 한국어/영어 언어 설정 기능 추가
    - 모든 UI 텍스트 다국어 번역 적용
    - 날짜 형식화 언어별 로컬라이제이션
    - Digital Clock AM/PM 위치를 시간 상단 왼쪽으로 이동
    - 시계 타일 세로 크기 10% 감소 (CardContent 패딩 조정)
    - 날씨 정보 크기 확대 (이모지, 온도, 조건 텍스트)
    - 날짜 표시 크기 및 폰트 가중치 증가
    - 다크모드에서 시계별 자동 테마 적용
    - Analog Clock 크기 조정 (200px → 180px)
  UI_시각적_개선:
    - 시계 카드에 그림자 및 호버 시 들어올리기 효과 추가
    - 그리드 간격 확대 (gap-4 → gap-6) 및 반응형 최적화
    - 2xl 브레이크포인트에서 4열 그리드 적용
    - 시계 추가 버튼 스타일 개선 (대시 보더, 호버 효과)
    - 드래그 핸들 시각적 피드백 강화
    - 헤더 타이틀 그라디언트 효과 및 크기 증대
    - 날씨 로딩 애니메이션 이중 스피너 효과 추가
    - 탭 바 스타일 개선 (배경, 라운딩, 그림자)
    - 버튼 호버 효과 및 트랜지션 개선
    - AM/PM 표시 개선 (위치 분리, 색상 구분, 라운딩 최적화)
      - AM: 황금/주황 그라디언트 (아침 햇살)
      - PM: 파랑/보라 그라디언트 (저녁 하늘)
      - 시간에서 더 멀리 배치 (-top-8, -left-4)
      - 그림자 효과 추가로 입체감 부여
  날씨_상세정보_팝업:
    - 날씨 클릭 시 상세정보 다이얼로그 표시
    - WeatherAPI Forecast API를 통한 3일 예보 조회
    - 당일 시간별 예보 (1시간 간격) 표시 - 현재 시간 이후 최대 12시간
    - 현재 날씨 (온도, 습도, 풍속) 상세정보
    - 각 예보에 이모지 아이콘 및 온도 범위 표시
    - 강수확률 정보 포함
    - 다국어 지원 (날짜/시간 형식 현지화)
    - 스크롤 방지를 위한 반응형 다이얼로그 디자인 (max-w-2xl)
    - 그리드 레이아웃으로 컴팩트한 정보 배치
    - 무료 WeatherAPI 플랜 범위 내 구현

새로운요구사항:
  도시기반_시계선택:
    - 국가 단위에서 주요 도시 단위로 시계 선택 방식 변경
    - 각 대륙별 주요 도시 목록 제공 (아시아, 유럽, 북미, 남미, 아프리카, 오세아니아)
    - 도시명, 국가명, 타임존 정보를 함께 표시
    - 도시별 대표 국기 표시
    - 검색 시 도시명과 국가명 모두 검색 대상
  국가별_다크모드:
    - 각 시계별로 해당 국가의 현지 시간 기준 다크모드 적용
    - 밤시간 기준: 오후 9시(21:00)부터 오전 7시(07:00)까지
    - 다크모드 시 시계 배경색을 검은색으로 변경
  드래그앤드롭:
    - 시계 카드를 드래그하여 위치 변경 가능
    - 드래그 중 시각적 피드백 제공
    - 드롭 후 새로운 순서 localStorage에 저장
  서머타임표시:
    - 현재 서머타임을 적용하고 있는 국가에 DST 뱃지 표시
    - 시각적으로 구분 가능한 아이콘 또는 텍스트 표시
  URL공유기능:
    - 선택된 국가 목록과 순서를 URL 파라미터로 인코딩
    - 다른 사용자가 URL 접근 시 동일한 시계 구성 표시
    - 브라우저 뒤로가기/앞으로가기 지원
    - URL 복사 기능 제공
  브랜딩_UI개선:
    - 커스텀 시계 모양 SVG favicon 추가 (파란색 그라디언트)
    - 하단 Footer 컴포넌트 추가 (GitHub 링크 포함)
    - Lucide React GitHub 아이콘 사용
    - 반응형 Footer 디자인
    - 메타데이터 개선 (SEO 최적화)
  프로젝트문서화:
    - 포괄적인 README.md 작성
    - 기능 설명 및 스크린샷
    - 설치/실행 가이드 제공
    - 기술 스택 명시
    - 사용법 단계별 설명
    - 지원 도시 목록 정리
    - 기여 가이드라인 포함
  오픈소스화:
    - MIT 라이선스 적용
    - 자유로운 사용, 수정, 배포 허용
    - GitHub 공개 저장소
    - 기여자 환영 정책
  실시간날씨정보:
    - WeatherAPI.com 연동을 통한 실시간 날씨 데이터 조회
    - 각 시계 위젯 하단에 날씨 정보 표시
    - 현재 온도 (섭씨) 및 날씨 아이콘 제공
    - 날씨 상태별 이모지 매핑 (맑음, 흐림, 비, 눈 등)
    - API 키가 없어도 시계 기능은 정상 동작
    - 10분 간격으로 날씨 정보 자동 업데이트
    - 로딩 상태 및 오류 처리 포함
    - 환경변수를 통한 API 키 관리 (NEXT_PUBLIC_WEATHER_API_KEY)